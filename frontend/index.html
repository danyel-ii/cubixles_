<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>cubeless</title>
    <link rel="stylesheet" href="style.css" />
    <script src="https://cdn.jsdelivr.net/npm/p5@1.9.2/lib/p5.min.js"></script>
  </head>
  <body>
    <div id="overlay" class="overlay">
      <div class="overlay-card">
        <div class="overlay-title">cubeLess</div>
        <div class="overlay-sub">
          Mint interactive p5.js artworks whose provenance is tethered to NFTs you already own.
        </div>
        <div class="overlay-section">
          <div class="overlay-section-title">How it works</div>
          <ol class="overlay-steps">
            <li>Connect your wallet.</li>
            <li>Select 1–6 NFTs from your wallet.</li>
            <li>We snapshot key metadata (and collection floors when available).</li>
            <li>We publish the interactive artwork + metadata to IPFS.</li>
            <li>You sign a direct mint on Ethereum.</li>
          </ol>
        </div>
        <div class="overlay-section">
          <div class="overlay-section-title">What gets minted</div>
          <p class="overlay-text">
            An ERC-721 with hosted metadata and an <span class="overlay-em">animation_url</span>
            pointing to an IPFS-hosted interactive cube.
          </p>
        </div>
        <div class="overlay-section">
          <div class="overlay-section-title">Fees</div>
          <p class="overlay-text">
            Mint: dynamic (base 0.000777 ETH) · Resale royalty: 5% (ERC-2981)
          </p>
        </div>
        <div class="overlay-section">
          <div class="overlay-section-title">Notes</div>
          <p class="overlay-text">
            If floor data is unavailable, we display 0. Your selection is embedded as provenance.
          </p>
        </div>
        <div class="overlay-actions">
          <button id="enter-btn" class="overlay-button" type="button">
            Enter
          </button>
          <button id="overlay-leaderboard" class="overlay-button is-ghost" type="button">
            Leaderboard
          </button>
          <button id="overlay-about" class="overlay-button is-ghost" type="button">
            About
          </button>
        </div>
        <div id="overlay-about-panel" class="overlay-about">
          <div class="overlay-section-title">About</div>
          <p class="overlay-text">
            cubeLess reads your wallet address and NFT metadata to build provenance snapshots. No
            private keys are accessed; minting is a direct onchain transaction you sign.
          </p>
        </div>
      </div>
    </div>
    <div id="eth-hud" class="eth-hud" aria-hidden="true">
      <div class="eth-hud-body">
        <svg class="eth-hud-icon" viewBox="0 0 120 180" aria-hidden="true">
          <polygon points="60,0 115,90 60,125 5,90" />
          <polygon points="60,130 115,90 60,180 5,90" />
        </svg>
        <div class="eth-hud-label">ΔLESS</div>
        <div id="eth-hud-value" class="eth-hud-value">ΔLESS —</div>
        <div id="eth-hud-time" class="eth-hud-time">token: —</div>
      </div>
    </div>
    <div id="less-hud" class="less-hud" aria-hidden="true">
      <div class="less-hud-label">$LESS remaining</div>
      <div id="less-supply-value" class="less-hud-value">—</div>
      <div id="less-supply-time" class="less-hud-time">updated —</div>
    </div>
    <div id="token-view-status" class="token-view-status is-hidden">
      Loading token...
    </div>
    <div id="ui" class="ui-panel">
      <div class="ui-title">cubeless</div>
      <div class="ui-sub">
        Choose 1 to 6 Sepolia NFTs to wrap the cube.
      </div>
      <div class="ui-row">
        <button id="wallet-connect" class="ui-button" type="button">
          Connect Wallet
        </button>
        <button id="wallet-disconnect" class="ui-button is-ghost" type="button">
          Disconnect
        </button>
      </div>
      <div id="wallet-status" class="ui-hint">Wallet: not connected.</div>
      <div class="ui-row">
        <button id="leaderboard-open" class="ui-button is-ghost" type="button">
          Leaderboard
        </button>
      </div>
      <div class="ui-section">
        <div class="ui-section-title">NFT picker</div>
        <div id="nft-status" class="ui-hint">
          Connect your wallet to load Sepolia NFTs.
        </div>
        <div class="ui-row">
          <button id="nft-refresh" class="ui-button is-ghost" type="button">
            Refresh NFTs
          </button>
          <button id="nft-clear" class="ui-button is-ghost" type="button">
            Clear selection
          </button>
          <button id="nft-apply" class="ui-button" type="button">
            Apply to cube
          </button>
        </div>
        <div id="nft-selection" class="ui-hint">Selected 0 / 6</div>
        <div id="nft-grid" class="ui-grid"></div>
      </div>
      <div class="ui-section">
        <div class="ui-section-title">Mint</div>
        <div id="mint-status" class="ui-hint">Connect your wallet to mint.</div>
        <div id="mint-floor-summary" class="ui-hint">
          Total floor (snapshot): 0.0000 ETH
        </div>
        <div id="mint-floor-list" class="ui-floor-list"></div>
        <div class="ui-row">
          <input
            id="mint-payment"
            class="ui-input"
            type="number"
            min="0"
            step="0.0001"
            placeholder="ETH amount"
          />
          <button id="mint-submit" class="ui-button" type="button">
            Mint NFT
          </button>
        </div>
        <div id="mint-price" class="ui-hint">Mint price: —</div>
        <div class="ui-row">
          <button id="mint-share-copy" class="ui-button is-ghost is-hidden" type="button">
            Copy share link
          </button>
        </div>
        <div id="mint-share-link" class="ui-hint"></div>
      </div>
      <div class="ui-row">
        <button id="ui-preview" class="ui-button is-ghost ui-preview-btn" type="button">
          Preview
        </button>
        <button id="ui-landing" class="ui-button is-ghost" type="button">
          Landing
        </button>
      </div>
    </div>
    <div id="preview-bar" class="preview-bar is-hidden">
      <button id="preview-back" class="ui-button is-ghost" type="button">
        Back to controls
      </button>
    </div>
    <div id="leaderboard" class="ui-panel is-hidden">
      <div class="ui-title">Leaderboard</div>
      <div class="ui-sub">Mint history coming soon.</div>
      <div class="ui-section">
        <div class="ui-section-title">Contract</div>
        <div id="leaderboard-contract" class="ui-hint"></div>
        <div id="leaderboard-chain" class="ui-hint"></div>
        <div id="leaderboard-supply" class="ui-hint"></div>
        <div id="leaderboard-updated" class="ui-hint"></div>
      </div>
      <div class="ui-section">
        <div class="ui-section-title">Top ΔLESS</div>
        <div id="leaderboard-status" class="ui-hint">Connect your wallet to load the leaderboard.</div>
        <div id="leaderboard-list" class="ui-list"></div>
      </div>
      <div class="ui-row">
        <button id="leaderboard-back" class="ui-button is-ghost" type="button">
          Back
        </button>
        <button id="leaderboard-landing" class="ui-button is-ghost" type="button">
          Landing
        </button>
      </div>
    </div>
    <div id="debug-panel" class="debug-panel is-hidden" aria-live="polite">
      <div class="debug-header">
        <span>Debug</span>
        <button id="debug-close" class="debug-close" type="button">×</button>
      </div>
      <pre id="debug-log" class="debug-log"></pre>
    </div>
    <main id="app"></main>
    <script type="module" src="/src/main.js"></script>
  </body>
</html>
