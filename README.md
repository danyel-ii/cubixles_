# cubixles_

Last updated: 2026-01-09

cubixles_ lets users mint NFTs linked to interactive p5.js artwork whose provenance is tethered to NFTs they already own.
The frontend runs on Next.js, and the contracts are built and tested with Foundry.

## Product snapshot
- Wallet connect supports EIP-6963 browser wallets and WalletConnect fallback.
- Token viewer routes live at `/m/<tokenId>` with OG previews at `/m/<tokenId>/opengraph-image`.
- NFT picker filters spam/airdrops and surfaces purchased/minted ERC-721s.
- Multi-chain UI supports mainnet + Base; Base uses ETH-only linear pricing (0.0012 ETH base + 0.000012 ETH per mint, immutable).

## Repository layout
- `app/` — Next.js app router, API routes, and UI.
- `app/_client/` — client-side modules (p5, UI panels, mint flow, data).
- `contracts/` — Solidity contracts + tests + scripts.
- `docs/` — architecture, security, operations, and status docs.

## Quickstart
```sh
npm install
npm run dev
```

## Contracts
```sh
cd contracts
forge test -vvv
```

## Coverage + security checks
```sh
npm test
npm run coverage:contracts
npm run test:ui
npm run check:no-client-secrets
npm run check:no-repo-secrets
cd contracts
npx solhint "src/**/*.sol"
slither . --config-file slither.config.json
# If slither isn't on PATH:
../.venv-slither/bin/python -m slither . --config-file slither.config.json
```

## Fork tests (release gate)
`scripts/fork-test.sh` loads `.env` and `.env.local` if present, or you can export the RPC URLs directly.
```sh
export MAINNET_RPC_URL=...
export FORK_BLOCK_NUMBER=19000000
export BASE_RPC_URL=...
export BASE_FORK_BLOCK=30919316
export NO_PROXY="*"
export HTTP_PROXY=""
export HTTPS_PROXY=""
npm run fork-test
```

## Configuration
Copy `.env.example` to `.env` for shared defaults. Put network-specific deploy values in `.env.mainnet` and `.env.base` (git-ignored). Keep secrets in `.env.local` for local use only. For CI and production, store secrets in GitHub Actions and Vercel instead of local env files.

Base mint pricing is immutable (linear step), so no updater script is required.

## Documentation
Start with:
- `MASTER.md`
- `docs/00-OVERVIEW/MASTER.md`
- `docs/20-CONTRACTS/CONTRACT_DETAILS.md`
- `docs/30-SECURITY/SECURITY_AUDIT.md`

## Support
See `SUPPORT.md` for defect reporting and help channels.

## Security
See `SECURITY.md` for vulnerability reporting guidance.

## License
See `LICENSE`.

## Signature
```
f---------------------------------------------------------------------------------------------------
r-+#*#****+##*#**#***+#***+#+**+#+++=+=+-=--=-------------------------------------------------------
e-#@@@@@@@%%%%%%%%#%##%#%%*#*####***++=+===------==--===-=-=-=-==-=-===-===========+=+=++++++=*+*=--
e-#@@@@%%@%%%##%#*#*##**+**+*+++=======-----+#%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%###*+==--
p-*@@%@%%@*#%+##=+#=++=*=+=-====-------=---##@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@%%%%%#*%@%@@@@@@+--
a-*%@%%%%%***++==++==----------------------%%@@@%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%@@@@@@@@@%#@%@%%%@%*--
l-*%%%%%##*++=====-------------------------@%@@%%@@@%%##################%%%%@@%%%%#@@@@%#@%@%@%@@+--
e-*#@#%%*#==+-==------------------------=--@#@@*@@-==+===============---=-=---==+@@#@%@%#@%@%%%@%+--
s-*%%###+*+==---------------======---------%#@@*@*-=++========+%**--------++=-==-#@#@@@%#@%@%%%@@+--
t-+**#+*+==----=-------+##%@@@@@@@@@%#+==--*##%*%*-=====------*%%%*+=--=+#%*#+-==#%#@%@%#@%@%%@@@*--
i-****=+=-----------+@##%##%@@@%***#%@@@@@@@%++=#+-=====------+%*#**%%@%%@%%#=-=-#%#@@@%#@#@%@%@@+--
n-+*+===----------*#+*##%@@@@@@@%#**%@@@#@@%%%@#+=-=----=+=----#*++-----=#*#*--==#%#@@@%#@#@%%@@@+--
e-=+==----------*#*%@%%***#%@@@@@@@##%@@@@@@@%#%@#----*#+===#+-+%+*=----##*%=--==#%#@@@%%@#@%%@@@*--
f-===----------%#@@@@%#*++*#*#@@@@@@@@@@@@@@@@%%@@@+-%%#+=-+=#=-#%*%+--%**%+---==#%#@@@%%@%@%%@@@+--
r---=----=----+@%@@@@@@@@@%@%%**%#%%@@@@@@@@@%%@@@@@@*+@%#+====#+-*%*#%#+*#=--====#%%@%%%%@#@@%@@@*--
e-------=----+@@@@@@@@@@@@@@@@%%+=+*###%@@%%%%%*#%@%%@%*%%*+***##--*%*++#%==+=====%%#*#%#%@#@@@@@@+--
e-------=---+@@@@@@@@@@@@@@@@@@@@%*+=*==++*++%@@##*+*#@%+#%#**%%=---#%*#@=-======-%%%@@@%#@#@@@@@@+--
p----------=@@@@@@@@@@@@@@@@@@@@@%@@#%%##@%###+%@@@@%@@@%+*#%%#=-==-#%**%--======-%%#@@@%%@#@@@@@@*--
a---------=@@@@@@@@@@@@@@@@@@@@@@@%#@@@@*@@@%==+%@%%@@@@%%=++=-==-=-##+*%--======-%%####%%@#@@@@@@+--
l--------=%@@@@@@@@@@@@@@@@@@@@@@*#@@@%*#@@#---=#@*+%@@@@%*-=====---##+#@-=======-%#%%#@%%@#@@@@@@+--
e-------=%@%%@@@@@@@@@@@@@%%@@#*#@@@#++*@@*----=%%==*@@@@#%-=======-%%*#%========-%#%@@@%%@%@@@@@@+--
s------+@@%%@@@@@@@@@@@**#*++#@@@*++==#%+---=--=#=--+@@@@##-========%###%=-=======%#%@%@%%@%@@%@@@+--
t-----+#%%@@@@@@@@@@@%**#%@@%%*+===-=+=-===-=----=*%%@@@%+-==-======#%#%%=-======-%#%@@@%%@%@@@@@@+--
i----**@@@@@%#%#+%@@@#*#**##%@@@@%*+---+++++-=*%@@@%%@@@#=====---==-=+**=-========%#%@@@#%@%@@%@@@+--
n---*+%@@@@@*%@@@@@@@#**#%@@@%%%@@@@@@#+==+%@@@##***#@@@#==++**####%%##*++==----=#@#%@@@#%@%@@%@@@+--
e--==@@@@@@@*#*@@@@@%*+++##+@@@%+#@#**+=-=#@@@@@=*%+%@@@@++#%@@@@%##****####%%%%@@@*@@@@#%@%@@@@@@+--
f--=@@@@@@@@#*#@%#@@%*++=+#**#*+-=+*+++===+#+##++#+=%@@@%@++####%%%@@@@@@@@@@@@@%%%@@@@@#%@%@@@@@%=--
r--+@@%@@@@@@***@#%%%*++===+#%##*=---==+===-+*#%*===@@@@#****%@@@@@@@%##**#%@@@@@@@@@@@@#%@@@@@%#*+--
e--+@@#%@@@@@%***#****+++=---===----+++==+*+-=+=---+@@@@@#-=+*###%%%%%%@@@@@@@@@@%#***##*@@@@%#@@@*--
e---#@*%@@@@@@@@%@%*####*+==-------+%@@%#%%%-------%@@@@@@*==+++**+****####%%@@@@@@%#%@@@@@@@@@@@%+--
p----+*#@@%@@@@@@@+**=+#+=%*==------+*%@@#=-------+@@@@@%@@====+=====+===+====+*#%@@#*@@@@@%%%%%%#+--
a---==--*@@+%@@@@##%++#=-==+*=--------===--------+@@@@@@%*%-========++**##%@%%#%%*+++++********#*+=--
l---==---=++*@@@@#%*+#+=-+#+%==--=*##%#####*----+@@@@@@@**+-+%%%%####*******+**+++***###*+++==+=+=---
e----=---=#@@@@@%##+*+=--==%@#+=--=-=+***=----+@@@@@%@@#=---*#*+*#@%*+++**++++++###%%#*+==++#==+==---
s---=--=#@%%@@@@%##***+=------=##+==+=====--+%@@@@@%@%@+-==-*#@@@@@%##%%%%%#**+==+++++=----*#=====---
t--=--*@@@%%%%@@@@%#****++=------+#+======*@@@@@@@%*+#@@*===*#%#%%%@@@@@@%++===+=+=++*=++--*#=+=++---
i----%%#%@@@@@@@%@@@@#****++==-----#@##%@@@@@%##@@%*#@@*%===*#%*%****@@@@%++-+#+-**#+**%=--*#++==+=--
n---%@@@%%@@%#%@@@@@@@@@#***++==---*@@@@@@%@%#*@@@*%*+#+*#-=##%%#**##**#@%++-++#+**+++=+---*#+=++==--
e--*@@@@###%@%#@%%@@%%@@@@%#**+=---#@%%@@##+@@@++#@%+%@+=%+=###*%%#@@%%%%%+++++--+#+++=#*+**#+=++==--
f--%@@@@%%*%@@@@@%%@@@@@@@****+=--=%@@%*+%+*@@%++@@#%@%#@@@=*##*#+**###%@%++**=#**#=%#=###++#++=+==--
r-=%@#*#@@@%+*%@%%@%%@@@@#**+=----*@%*#%@@@#*#%%%%%%%#=*@@@**#%@@@%%*###*%++*#**+++=--==+*-*#+++*+=--
e-=%@###@@@@+++%@%#@%@@@#**+=----=@@@#**@@%*+#@@#%@@#+*##++%##%@%%%#%@@%%%++=--=+*#%@@@@@@-*#+++++=--
e-=@@@@@##++%@@%@@%@@@@%*++==----#%%%%%%%%%%%%%%#@@@%@@@%+=*##@@@#%@@@@@@%++*@@@@%+++*%@@@-*#+=*++=--
p-+%%@@@#+*#%@@@%#%@@@%++*==----+@#%@@@*+*@@@#+%@@%#%@@%#%%%##%@@*%#%@@@@%++*@@##*+===+*@@=*#+*+++=--
a-=%%@%#@@@@%*#%@%%@@%+++==-----#@%@@@#+*@@@@*#@@@%%@%*+=#@#####@##*#@@@@%++*@%%+++===++#@-*#**+*+=--
l-=%@##*@@@@@#%%%@%%%*++==-----+@@%**#@@%**+@@%@@%@@@@**%@==*#####%@@@@@@%++*@%%%%*##+=+#@-*#+*#**=--
e-=%@%#%@*###@@@@#*@#*++=------#@@#*#@@@##*%@@%@@#@@%#@@@@#=*##@%##*+#*##%++*@@#**=+===%%@-*#*%%%%+--
s-=%@%@@@%%@%%@@@#@@%**+=-----=%%@@@###@@@@%%@@%@@@%%%@##*#####@@@@@@@%%%%++*@@#*#++==+#@@=*%#%%%%+--
t-=%%%@@@@@%%@@@@@@@%%*+------*@@@@%##%@@@@@@@@%@@@@@@@@@@#####@@@@@@@@@@%++*@@#%*===+*##@=*%%%@@@*--
i-=%%%%%@@@@@%#@#+#@*+%*==----%@@%@@@@%@@@@@%##@@@@#+=+%@#++###@@@@@@@@@@%++*@@@%*+*#*=+*%-*%%@@@@*--
n-+@@@%@@%@@%%*%+++#*=-+%%#=-*@@@@@@%#*%%%%%+=-=#%#**%@@@%#+###@@@@@@@@@%%++*@@@@@%%#+===*-*@@@@@@+--
e-+@@@@@%%%@@%@@#=#@@%=+@@@@%*+*#=+#%===#@%#*@@@@*===#@@@%==*#%@@@@@@@%@@%++*@@@@%@%+=+*==-*%%@@@@+--
f-+@@@%@%%@@@@@@@%@@@@@#%@@@*=+%+-=+%@%%%*--=#@@@%**#%%*++@*##%@@@@@@@@@@%++*@@%%#%++**+++-*#+****=--
r-+%@@#@@@%%@#@@%++%@@*--=+#%%@#=--+*@@@@%++*#*+++%@@@%===++##%@@@@@@@@%@%++*@%%##+**#**++-*#+++++=--
e-+%@@@@@@%%@##@+===+#=---#@@@%+=+++*%*==+%@@@*===#%%#++*%@@@#%@@@@@@@@@%%++*@#%#*++#*#=++=*@@#++==--
e-+%%@@@%@@#%%%@%+==#%@@%*%%%@*****##%#+++#@%#***##%%%%%%%%%@#%@@@@@@@@@@%++*@%@%+#####*#*=*#***#%+--
p-+@@@@@@%#@@@@@@@#%@@@@%+=*@@@@@@@@@%###%%%###*#####%%%%%%@@#%@@@@@@@@@@%++*@%@*##*%#*+===*#++===---
a-=%%%@@@@@@@@@@@%++*@@%++#@@@@%%%%%@@#+********++***###%%%@@%%@@@@@@@@@@%++*@@%*+=====+==+##======--
l-=##%%%%@@@@@%##+****%@@@%%##%##*#%@%####*+++=++==++++**#%%%@@%%%@@@@@@@%++====+====+###*+=====+*=--
e-=******#*#%%@@@@@@@@@%##****++*+#%@%@@@@%#**%#=====++=++++*###@@%%%@@@@%++====*#%#+++===+=+#%**%+--
s-=+++**+++*++**++**+=+++=+++==++=#%@#@%%%%%%@@#*#@%*+++==+++=++++*#%@%###+*#@#*======+=+%%**%@%%*=--
t-=%%*+===+===+============++++**#%%@#@%#######%%@@%#####*+========+==+++*+==+====+*#####%@#***+++=--
i-+%%%%%%*=--===-=====++==+++**#%%@%@#@%###*#*#*###%%@@@%#*#%#+=======++=+==+=*%#+*%%%#***+++++=++=--
n-=#%%%%%%%@%+=--=====+===+++*#%%@@%@#@%%##*********####%%@@@#+#@%*+====++*%#+*%@%**+*++++==+=++++---
e-=%@@@%#%%%%%%%#+====+===+++*##%@@@@%%@%%##*#*******#*#####%%@@@%###%#####%%***++=++++=+=++++++**=--
f-=%@@@@@@@%%%%%%%%%*=======++++*%%%@@@@##@%%##***#***#****####%%%@@@@@%#*+++++++=++==+++++++*##*#+--
r-=%@@@@@@@@@@%@%%%%%%%%+=--=+==+++*###%%@@%*%%%##**#***#*#***###%%@%++++++=+==+===++++++*##**%%*+=--
e-=%@@@@@@@@@@@@@%%%%%%%%%%#+=======+++*###%@@@%#%%%####***#*#*###%@*++==+==+=+=+++++*####%##++==+---
e-=%@@@@@@@@@@@@@@@@@%#%%%#%%%%#==-=++==++=+####@@@%*%@###%########%+===+=++=++*+*%%**%%*+=======+---
p-=%@%@%%@@@%@%@%@%@@@@@%#%%%%%%%%%+==-=+===++++###%@@@##%%%%%####%%+++++++++*#%#+#@#*+====+======---
a-=%@%@%%@@@%%%%%%%@@@@@@@@@%%%%%%%%%%#+-=-====+==+**#%%@@%##%@%%%%@*++++*##*##%%*++===========-=*=--
l-=%@%@%%@@@@@@%%%%%%%%%@@@@@@@@#%#%#%%%%%*=-=====++==**+*%%%@%*#@@%%*#%*+%@%#+====+==+====-=#%%##=--
e-=%@%@%%@@@@@@@@@%%%%%%%%@@@@@@@@@%%%%%%%%%@#+=--=====+==++++#%%@#*#**%%#*=++===========*%%##****=--
s-=#@%@#%%%@@@@@@@@@@@%%%%%%%%%@@@@@@@%%#%%%%%%%%#+--========+++=++*##*+=============*%%#*#*#*#*#%+--
t-=#@#%##%%@@@@%@@@@@@@@@%%%%%%%%%@%@@@@@@%%%#%%%#%%%*=--=+=-=+=-====+==+==+====-+%%##*#*##*##@@@%+--
i-=#@#%##%%@%%%%@@@%@@@@@@@@%%%%%%%%%@%@@@@@@@%%###%#%%@#+==--===============+#%###*#*##*#%@@%%###=--
n-=#@*%*#%%@%%%%@@%%@@%%%%%@@@@%%%%%%%%@%%%@@@@@@%##%%%#%%%%*=-==========+##%****#*#*#%@@@%%###*#*=--
e--*%*%*#%#%%%%%@@@@@@@%####%%@@@@%%%%%%#%%%@%%@@@@@%#%#%#%#%%%%+=====*%###***#***#@@%@%%%*####*#+=--
f--+#+#**%*%###%@@@@@@@@%#%@@@@%%@@@@%%%%%%%%%%@%@%%@@@@%%#%%%#%%%%#%##**#*#**#%@@%%%#%##***+*+*++=--
r--=++*+*#*##*##@%%@@%#++%@@@@@%#%@@@@@@@%%#%%%%#%%%%%@%@@@%%%%%%#%**+*****%%@@%####**#**++*++++==---
e-----=-=======+**+**+=+==*###**######%%#%%#***++*+#*##*###**##*++#+==+=*##*#***+*+=+========+-==----
e----------------------------------------------------------------------------------------------------
```
